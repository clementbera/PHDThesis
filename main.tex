\documentclass[a4paper,12pt,twoside]{includes/ThesisStyle}

\input{includes/macros}
\include{includes/formatAndDefs}

\graphicspath{{.}{figures/}}
\newcommand \logoInria{./includes/logos/Inria}
\newcommand \logoRegion{./includes/logos/Region}
\newcommand \logoLifl{./includes/logos/lifl}
\newcommand \logoUSTL{./includes/logos/Lille1}

\let\wholebook=\relax

\begin{document}
\include{chapters/titlePage}
\dominitoc

\pagenumbering{roman}

\cleardoublepage

\section*{Acknowledgments}

I would like to thank my thesis supervisors St\'ephane Ducasse and Marcus Denker for allowing me to do a Ph.D at the RMoD group, as well as helping and supporting me during the three years of my Ph.D.

I thank the thesis reviewers and jury members Ga\"el Thomas, Laurence Tratt and Laurence Duchien for kindly reviewing my thesis and providing me valuable feedback.

I would like to express my gratitude to Eliot Miranda for his first design of the Sista architecture and his support during the three years of my Ph.D. 

I would like to thank Tim Felgentreff for his evaluation of Sista architecture using the Squeak speed center.

For remarks on earlier versions of this thesis I thank (To confirm if they actually do it) Guillermo Polito and Damien Cassou.

\cleardoublepage

\section*{Abstract}

Most high-level programming languages run on top of a virtual machine (VM) to abstract away from the underlying hardware. To reach high-performance, the VM typically relies on an optimising just-in-time compiler (JIT), which speculates on the program behavior based on its first runs to generate at runtime efficient machine code and speed-up the program execution. As multiple runs are required to speculate correctly on the program behavior, such a VM requires a certain amount of time at start-up to reach peak performance. The optimising JIT itself is usually compiled ahead-of-time to executable code as part of the VM.

The dissertation proposes an architecture for an optimising JIT, in which the optimised state of the VM can be persisted across multiple start-ups and the optimising JIT is running in the same runtime than the program executed. To do so, the optimising JIT is split in two parts. One part is high-level: it performs optimisations specific to the programming language run by the VM and is written in a metacircular style. Staying away from low-level details, this part can be read, edited and debugged while the program is running using the standard tool set of the programming language executed by the VM. The second part is low-level: it performs machine specific optimisations and is compiled ahead-of-time to executable code as part of the virtual machine. The two parts of the JIT use a well-defined intermediate representation to share the code to optimise. This representation is machine-independent and can be persisted across multiple start-ups, allowing the virtual machine to reach peak performance very quickly.

To validate the architecture, the dissertation includes the description of an implementation on top of Pharo Smalltalk and its virtual machine. The implementation is able to run a large set of benchmarks, from large application benchmarks provided by industrial users to micro-benchmarks used to measure the performance of specific code patterns. The optimising JIT is implemented according to the architecture proposed and shows significant speed-up (1.5x to 5x) over the current production virtual machine. In addition, large benchmarks show that peak performance can be reached almost immediately after start-up if the VM can reuse the optimised state persisted from another run.

\cleardoublepage

\section*{R\'esum\'e}

\tableofcontents
\listoffigures
%\listoftables

\mainmatter

\include{chapters/ch1-Introduction}
\include{chapters/ch2-ExistingVMs}
\include{chapters/ch3-ExistingRuntime}
\include{chapters/ch4-Architecture}
\include{chapters/ch5-RuntimeEvolution}
\include{chapters/ch6-Metacircular}
\include{chapters/ch7-Persistance}
%\include{chapters/ch8-Interface}
\include{chapters/ch9-Validation}
\include{chapters/ch10-FutureWork}
\include{chapters/ch10-Conclusion}

\appendix
\include{appendix/def}

\bibliographystyle{includes/ThesisStyle}
\bibliography{bib/sista}
%bib/rmod, bib/others


\end{document}

%%% Local Variables: 
%%% coding: utf-8
%%% mode: latex
%%% TeX-master: "main"
%%% TeX-PDF-mode: t
%%% End:
